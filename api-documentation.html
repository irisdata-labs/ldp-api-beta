<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - Lunar Landing Site API</title>
    <meta name="description" content="Complete API documentation for querying 1.18M pre-analyzed lunar landing sites (-90° to -83.5° latitude). Comprehensive guides, code examples, and technical specifications.">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fa;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            padding: 2rem 0;
            color: #fff;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .header-content h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .header-content .subtitle {
            opacity: 0.8;
            font-size: 1.1rem;
        }

        .version-badge {
            display: inline-block;
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 1rem;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        /* Navigation */
        .nav-bar {
            background: #fff;
            border-bottom: 2px solid #e0e0e0;
            position: sticky;
            top: 0;
            z-index: 999;
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            gap: 2rem;
            overflow-x: auto;
        }

        .nav-content a {
            color: #666;
            text-decoration: none;
            font-weight: 500;
            white-space: nowrap;
            padding: 0.5rem 0;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .nav-content a:hover {
            color: #4CAF50;
            border-bottom-color: #4CAF50;
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        .doc-section {
            background: #fff;
            padding: 2.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        h2 {
            font-size: 2rem;
            color: #1a1f3a;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #4CAF50;
        }

        h3 {
            font-size: 1.5rem;
            color: #1a1f3a;
            margin: 2rem 0 1rem;
        }

        h4 {
            font-size: 1.2rem;
            color: #333;
            margin: 1.5rem 0 0.75rem;
        }

        p {
            margin-bottom: 1rem;
            line-height: 1.8;
            color: #666;
        }

        /* Code Blocks */
        .code-block {
            background: #0a0e27;
            color: #e0e0e0;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            white-space: pre;
        }

        .code-block .comment {
            color: #4CAF50;
        }

        code {
            background: #f0f0f0;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #e91e63;
        }

        .code-block code {
            background: none;
            padding: 0;
            color: #e0e0e0;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: #fff;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #1a1f3a;
        }

        tr:hover {
            background: #f8f9fa;
        }

        /* Lists */
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
            color: #666;
        }

        /* Highlight Boxes */
        .highlight-box {
            background: #f0f7ff;
            border-left: 4px solid #2196F3;
            padding: 1.5rem;
            border-radius: 4px;
            margin: 1.5rem 0;
        }

        .success-box {
            background: #e8f5e9;
            border-left: 4px solid #4CAF50;
            padding: 1.5rem;
            border-radius: 4px;
            margin: 1.5rem 0;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1.5rem;
            border-radius: 4px;
            margin: 1.5rem 0;
        }

        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #6c757d;
            padding: 1.5rem;
            border-radius: 4px;
            margin: 1.5rem 0;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #4CAF50;
            display: block;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: #fff;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
        }

        .btn-secondary:hover {
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
        }

        /* Footer */
        footer {
            background: #0a0e27;
            color: #fff;
            padding: 2rem;
            text-align: center;
            margin-top: 4rem;
        }

        footer a {
            color: #4CAF50;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Table of Contents */
        .toc {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .toc h3 {
            margin-top: 0;
            color: #1a1f3a;
        }

        .toc ul {
            list-style: none;
            padding-left: 0;
        }

        .toc ul ul {
            padding-left: 1.5rem;
        }

        .toc a {
            color: #2196F3;
            text-decoration: none;
        }

        .toc a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content h1 {
                font-size: 1.5rem;
            }

            .doc-section {
                padding: 1.5rem;
            }

            table {
                font-size: 0.85rem;
            }

            .nav-content {
                gap: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Smooth scroll */
        html {
            scroll-behavior: smooth;
        }

        /* JSON syntax highlighting */
        .json-key { color: #2196F3; }
        .json-string { color: #4CAF50; }
        .json-number { color: #ff9800; }
        .json-boolean { color: #e91e63; }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>🌙 Lunar Landing Site API <span class="version-badge">v1.0.0</span></h1>
            <p class="subtitle">Complete Documentation - Query 1.18M Pre-Analyzed Landing Sites</p>
        </div>
    </header>

    <nav class="nav-bar">
        <div class="nav-content">
            <a href="#quick-start">Quick Start</a>
            <a href="#authentication">Authentication</a>
            <a href="#endpoints">Endpoints</a>
            <a href="#data-overview">Data Overview</a>
            <a href="#code-examples">Code Examples</a>
            <a href="#best-practices">Best Practices</a>
            <a href="#support">Support</a>
        </div>
    </nav>

    <div class="container">
        <!-- Introduction -->
        <div class="doc-section">
            <h2>📖 Overview</h2>
            <p>Query 1.18M pre-analyzed lunar landing sites across the lunar south pole with intelligent mission planning support.</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">1.18M</span>
                    <span class="stat-label">Analyzed Sites</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">60+</span>
                    <span class="stat-label">Features per Site</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">&lt;100ms</span>
                    <span class="stat-label">Query Response</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">99.98%</span>
                    <span class="stat-label">Data Completeness</span>
                </div>
            </div>

            <div class="info-box">
                <strong>Base URL:</strong> <code>https://lunarlandingsiteapi.up.railway.app</code><br>
                <strong>API Version:</strong> 1.0.0<br>
                <strong>Status:</strong> Public Beta
            </div>
        </div>

        <!-- Quick Start -->
        <div class="doc-section" id="quick-start">
            <h2>🚀 Quick Start</h2>
            
            <h3>Step 1: Get API Access</h3>
            <ol>
                <li><strong>Sign up</strong> at <a href="https://ldp-api-beta.vercel.app">ldp-api-beta.vercel.app</a> for free beta access</li>
                <li><strong>Check your email</strong> for your API key (starts with <code>ldp_live_...</code>)</li>
                <li><strong>Make your first request</strong> using the examples below</li>
            </ol>

            <h3>Step 2: Your First Query (30 seconds)</h3>
            <p>Get intelligent landing site recommendations near the lunar south pole:</p>

            <h4>Python</h4>
            <div class="code-block">import requests

API_KEY = "ldp_live_YOUR_KEY_HERE"
headers = {"X-API-Key": API_KEY}

response = requests.get(
    "https://lunarlandingsiteapi.up.railway.app/api/v1/recommendations",
    headers=headers,
    params={
        "lat": -89.5,
        "lon": 45,
        "mission_type": "artemis",
        "top_n": 5
    }
)

data = response.json()
print(data["recommendations"][0]["reasoning"])
print(f"Requests remaining: {data['user']['requests_remaining']}")</div>

            <h4>JavaScript</h4>
            <div class="code-block">const API_KEY = "ldp_live_YOUR_KEY_HERE";

const response = await fetch(
  'https://lunarlandingsiteapi.up.railway.app/api/v1/recommendations?lat=-89.5&lon=45&mission_type=artemis&top_n=5',
  { headers: { 'X-API-Key': API_KEY } }
);

const data = await response.json();
console.log(data.recommendations[0].reasoning);
console.log(`Requests remaining: ${data.user.requests_remaining}`);</div>

            <h4>cURL</h4>
            <div class="code-block">curl -H "X-API-Key: ldp_live_YOUR_KEY_HERE" \
  "https://lunarlandingsiteapi.up.railway.app/api/v1/recommendations?lat=-89.5&lon=45&mission_type=artemis&top_n=5"</div>
        </div>

        <!-- Data Overview -->
        <div class="doc-section" id="data-overview">
            <h2>📊 Data Overview</h2>
            
            <p>This API provides access to <strong>1.18M pre-analyzed landing sites</strong> across the lunar south pole, derived from authoritative NASA datasets:</p>

            <ul>
                <li><strong>Terrain Data:</strong> NASA LOLA (Lunar Orbiter Laser Altimeter) at 5m resolution</li>
                <li><strong>Illumination Data:</strong> NASA LROC (Lunar Reconnaissance Orbiter Camera)</li>
                <li><strong>Coverage:</strong> -90° to -83.5° latitude (lunar south pole region)</li>
                <li><strong>Data Quality:</strong> 99.98% completeness (1,179,905 sites with full data)</li>
            </ul>

            <p>Each site includes <strong>60+ features</strong> analyzed at multiple radii up to 100m radius: terrain metrics (slope, roughness, hazard index), illumination patterns (visibility percentage over lunar year), and data quality indicators.</p>

            <div class="success-box">
                <strong>✅ Why Trust This Data?</strong>
                <ul>
                    <li>Built on NASA Planetary Data System (PDS) archives</li>
                    <li>Research-grade processing pipeline with PostGIS spatial analysis</li>
                    <li>Validated against published lunar science literature</li>
                    <li>Same data sources used by Artemis mission planning teams</li>
                </ul>
            </div>
        </div>

        <!-- Authentication -->
        <div class="doc-section" id="authentication">
            <h2>🔐 Authentication</h2>
            
            <p>Most endpoints require an API key in the <code>X-API-Key</code> header:</p>

            <div class="code-block">X-API-Key: ldp_live_YOUR_KEY_HERE</div>

            <h3>Public Endpoints (No Authentication)</h3>
            <p>These endpoints are accessible without an API key:</p>
            
            <table>
                <thead>
                    <tr>
                        <th>Endpoint</th>
                        <th>Purpose</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>GET /</code></td>
                        <td>API welcome and endpoint listing</td>
                    </tr>
                    <tr>
                        <td><code>GET /health</code></td>
                        <td>Health check and database status</td>
                    </tr>
                    <tr>
                        <td><code>GET /docs</code></td>
                        <td>Interactive Swagger documentation</td>
                    </tr>
                    <tr>
                        <td><code>GET /openapi.json</code></td>
                        <td>OpenAPI specification</td>
                    </tr>
                </tbody>
            </table>

            <h3>Protected Endpoints (Authentication Required)</h3>
            <p>All data and decision support endpoints require a valid API key:</p>
            
            <table>
                <thead>
                    <tr>
                        <th>Endpoint</th>
                        <th>Purpose</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>GET /api/v1/sites/search</code></td>
                        <td>Search for landing sites (optional auth for full results)</td>
                    </tr>
                    <tr>
                        <td><code>POST /api/v1/sites/batch</code></td>
                        <td>Bulk site retrieval</td>
                    </tr>
                    <tr>
                        <td><code>GET /api/v1/recommendations</code></td>
                        <td>Get AI-powered recommendations</td>
                    </tr>
                    <tr>
                        <td><code>POST /api/v1/compare</code></td>
                        <td>Compare multiple sites</td>
                    </tr>
                </tbody>
            </table>

            <h3>API Key Management</h3>
            
            <div class="success-box">
                <strong>Where to Find Your Key:</strong><br>
                Check the welcome email: "Welcome to Lunar Landing API - Your Access Details"<br>
                Key format: <code>ldp_live_</code> followed by 32 alphanumeric characters<br>
            </div>

            <div class="warning-box">
                <strong>⚠️ Security Best Practices:</strong>
                <ul>
                    <li>Never share your API key publicly (GitHub, forums, etc.)</li>
                    <li>Never commit keys to version control</li>
                    <li>Use environment variables: <code>API_KEY = os.getenv("LUNAR_API_KEY")</code></li>
                    <li>Rotate keys if accidentally exposed</li>
                </ul>
            </div>

            <div class="info-box">
                <strong>Lost Your Key?</strong><br>
                1. Check your email inbox and spam folder<br>
                2. Search for emails from Lunar Landing Site API<br>
                3. Contact support: <a href="mailto:info@irisdatalabs.com">info@irisdatalabs.com</a>
            </div>
        </div>

        <!-- Rate Limits -->
        <div class="doc-section" id="rate-limits">
            <h2>📊 Rate Limits & Usage</h2>
            
            <h3>Current Limits</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Tier</th>
                        <th>Daily Limit</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Beta</strong></td>
                        <td>100 requests/day</td>
                        <td>Free during beta period</td>
                    </tr>
                    <tr>
                        <td><strong>Premium</strong></td>
                        <td>Coming soon</td>
                        <td>Coming soon</td>
                    </tr>
                </tbody>
            </table>

            <h3>Monitor Your Usage</h3>
            <p>Every authenticated API response includes your current usage statistics:</p>

            <div class="code-block">{
  "user": {
    "email": "your.email@example.com",
    "name": "Your Name",
    "tier": "beta",
    "requests_today": 45,
    "requests_remaining": 55,
    "rate_limit": 100
  },
  "recommendations": [...]
}</div>

            <h3>Usage Monitoring Best Practice</h3>
            <div class="code-block">data = response.json()
remaining = data['user']['requests_remaining']

if remaining < 100:
    print(f"⚠️ Warning: Only {remaining} requests remaining today!")</div>
        </div>

        <!-- Error Handling -->
        <div class="doc-section" id="error-handling">
            <h2>⚠️ Error Handling</h2>
            
            <h3>HTTP Status Codes</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Code</th>
                        <th>Meaning</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>200</strong></td>
                        <td>Success</td>
                        <td>Request completed successfully</td>
                    </tr>
                    <tr>
                        <td><strong>400</strong></td>
                        <td>Bad Request</td>
                        <td>Invalid parameters</td>
                    </tr>
                    <tr>
                        <td><strong>401</strong></td>
                        <td>Unauthorized</td>
                        <td>Missing API key</td>
                    </tr>
                    <tr>
                        <td><strong>403</strong></td>
                        <td>Forbidden</td>
                        <td>Invalid or inactive API key</td>
                    </tr>
                    <tr>
                        <td><strong>404</strong></td>
                        <td>Not Found</td>
                        <td>Resource doesn't exist</td>
                    </tr>
                    <tr>
                        <td><strong>422</strong></td>
                        <td>Validation Error</td>
                        <td>Parameter validation failed</td>
                    </tr>
                    <tr>
                        <td><strong>429</strong></td>
                        <td>Too Many Requests</td>
                        <td>Rate limit exceeded</td>
                    </tr>
                    <tr>
                        <td><strong>500</strong></td>
                        <td>Server Error</td>
                        <td>Internal server error</td>
                    </tr>
                    <tr>
                        <td><strong>503</strong></td>
                        <td>Service Unavailable</td>
                        <td>Database connection failed</td>
                    </tr>
                </tbody>
            </table>

            <h3>Error Response Format</h3>
            <div class="code-block">{
  "detail": {
    "error": "Invalid API key",
    "message": "The provided API key is not valid or has been deactivated",
    "help": "Sign up at https://ldp-api-beta.vercel.app to get a valid API key"
  }
}</div>

            <h3>Common Errors & Solutions</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Error</th>
                        <th>Cause</th>
                        <th>Solution</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Missing API key</td>
                        <td>No <code>X-API-Key</code> header</td>
                        <td>Add header to your request</td>
                    </tr>
                    <tr>
                        <td>Invalid API key</td>
                        <td>Key doesn't exist or is inactive</td>
                        <td>Check welcome email for correct key</td>
                    </tr>
                    <tr>
                        <td>Rate limit exceeded</td>
                        <td>100 requests/day limit hit</td>
                        <td>Wait until tomorrow (resets at midnight UTC)</td>
                    </tr>
                    <tr>
                        <td>Invalid parameters</td>
                        <td>Coordinates out of range</td>
                        <td>Verify lat (-90 to 90), lon (-180 to 180)</td>
                    </tr>
                    <tr>
                        <td>Site not found</td>
                        <td>Invalid site_id</td>
                        <td>Use <code>/search</code> to find valid site IDs</td>
                    </tr>
                </tbody>
            </table>

            <h3>Graceful Error Handling Example</h3>
            <div class="code-block">import requests

try:
    response = requests.get(url, headers=headers, params=params)
    response.raise_for_status()
    data = response.json()
except requests.exceptions.HTTPError as e:
    if e.response.status_code == 401:
        print("❌ Missing API key!")
    elif e.response.status_code == 403:
        print("❌ Invalid API key!")
    elif e.response.status_code == 429:
        print("⚠️ Rate limit exceeded - try again tomorrow")
    else:
        print(f"Error {e.response.status_code}: {e.response.text}")
except Exception as e:
    print(f"Request failed: {str(e)}")</div>
        </div>

        <!-- Endpoints Overview -->
        <div class="doc-section" id="endpoints">
            <h2>🔌 Endpoints Overview</h2>
            
            <h3>Status Endpoints</h3>
            <ul>
                <li><code>GET /</code> - API information and endpoint listing</li>
                <li><code>GET /health</code> - Health check and database status</li>
            </ul>

            <h3>Data Endpoints</h3>
            <ul>
                <li><code>GET /api/v1/sites/search</code> - Radius-based site search with filters</li>
                <li><code>POST /api/v1/sites/batch</code> - Bulk site retrieval by IDs</li>
            </ul>

            <h3>Decision Support Endpoints</h3>
            <ul>
                <li><code>GET /api/v1/recommendations</code> - Mission-specific intelligent recommendations</li>
                <li><code>POST /api/v1/compare</code> - Side-by-side site comparison</li>
            </ul>
        </div>

        <!-- GET /api/v1/sites/search -->
        <div class="doc-section">
            <h2>GET /api/v1/sites/search</h2>
            
            <p><strong>Description:</strong> Search for landing sites within a radius of target coordinates</p>
            <p><strong>Authentication:</strong> Optional (limited to 10 results without API key, 100 with key)</p>

            <h3>Parameters</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Default</th>
                        <th>Range</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>lat</code></td>
                        <td>float</td>
                        <td>✅</td>
                        <td>-</td>
                        <td>-90 to 90</td>
                        <td>Target latitude</td>
                    </tr>
                    <tr>
                        <td><code>lon</code></td>
                        <td>float</td>
                        <td>✅</td>
                        <td>-</td>
                        <td>-180 to 180</td>
                        <td>Target longitude</td>
                    </tr>
                    <tr>
                        <td><code>radius_m</code></td>
                        <td>int</td>
                        <td>❌</td>
                        <td>50000</td>
                        <td>1000-500000</td>
                        <td>Search radius in meters</td>
                    </tr>
                    <tr>
                        <td><code>limit</code></td>
                        <td>int</td>
                        <td>❌</td>
                        <td>100</td>
                        <td>1-100</td>
                        <td>Max results</td>
                    </tr>
                    <tr>
                        <td><code>min_visibility</code></td>
                        <td>float</td>
                        <td>❌</td>
                        <td>-</td>
                        <td>0-100</td>
                        <td>Minimum visibility % filter</td>
                    </tr>
                    <tr>
                        <td><code>max_hazard</code></td>
                        <td>float</td>
                        <td>❌</td>
                        <td>-</td>
                        <td>0-3</td>
                        <td>Maximum hazard index filter</td>
                    </tr>
                    <tr>
                        <td><code>max_slope</code></td>
                        <td>float</td>
                        <td>❌</td>
                        <td>-</td>
                        <td>0-90</td>
                        <td>Maximum slope filter (degrees)</td>
                    </tr>
                </tbody>
            </table>

            <h3>Example Request</h3>
            <div class="code-block">curl -H "X-API-Key: ldp_live_YOUR_KEY" \
  "https://lunarlandingsiteapi.up.railway.app/api/v1/sites/search?lat=-89.5&lon=45.0&radius_m=50000&max_hazard=1.5&limit=10"</div>

            <h3>Python Example</h3>
            <div class="code-block">import requests

API_KEY = "ldp_live_YOUR_KEY_HERE"
headers = {"X-API-Key": API_KEY}

response = requests.get(
    "https://lunarlandingsiteapi.up.railway.app/api/v1/sites/search",
    headers=headers,
    params={
        "lat": -89.5,
        "lon": 45.0,
        "radius_m": 50000,
        "max_hazard": 1.5,
        "min_visibility": 70.0,
        "limit": 10
    }
)

data = response.json()
print(f"Found {data['results_found']} sites")
for site in data['sites']:
    print(f"Site {site['site_id']}: Hazard {site['terrain_100m']['hazard_index']:.2f}")</div>

            <h3>Response Example</h3>
            <div class="code-block">{
  "query": {
    "location": {"lat": -89.5, "lon": 45.0},
    "search_radius_m": 50000,
    "filters": {
      "max_hazard": 1.5,
      "min_visibility": 70.0
    }
  },
  "results_found": 10,
  "sites": [
    {
      "site_id": 928913,
      "location": {"lat": -89.947, "lon": 51.466},
      "distance_m": 5012.3,
      "terrain_100m": {
        "slope_mean_deg": 16.5,
        "slope_max_deg": 32.6,
        "hazard_index": 3.0,
        "roughness_rms_m": 9.73
      },
      "illumination_100m": {
        "visibility_pct": 75.2
      }
    }
  ]
}</div>
        </div>

        <!-- GET /api/v1/recommendations -->
        <div class="doc-section">
            <h2>GET /api/v1/recommendations</h2>
            
            <p><strong>Description:</strong> Get AI-powered landing site recommendations with mission-specific scoring and plain English reasoning</p>
            <p><strong>Authentication:</strong> Required</p>

            <h3>Parameters</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Default</th>
                        <th>Options</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>lat</code></td>
                        <td>float</td>
                        <td>✅</td>
                        <td>-</td>
                        <td>-90 to 90</td>
                        <td>Target latitude</td>
                    </tr>
                    <tr>
                        <td><code>lon</code></td>
                        <td>float</td>
                        <td>✅</td>
                        <td>-</td>
                        <td>-180 to 180</td>
                        <td>Target longitude</td>
                    </tr>
                    <tr>
                        <td><code>mission_type</code></td>
                        <td>string</td>
                        <td>❌</td>
                        <td>artemis</td>
                        <td>artemis, robotic, rover, custom</td>
                        <td>Mission profile</td>
                    </tr>
                    <tr>
                        <td><code>radius_m</code></td>
                        <td>int</td>
                        <td>❌</td>
                        <td>50000</td>
                        <td>10000-500000</td>
                        <td>Search radius in meters</td>
                    </tr>
                    <tr>
                        <td><code>top_n</code></td>
                        <td>int</td>
                        <td>❌</td>
                        <td>5</td>
                        <td>1-20</td>
                        <td>Number of recommendations</td>
                    </tr>
                </tbody>
            </table>

            <h3>Mission Types</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Priorities</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>artemis</code></td>
                        <td>Human landing mission - prioritizes crew safety</td>
                        <td>50% safety, 30% illumination, 20% proximity</td>
                    </tr>
                    <tr>
                        <td><code>robotic</code></td>
                        <td>Robotic lander - balances safety and power</td>
                        <td>40% safety, 40% illumination, 20% proximity</td>
                    </tr>
                    <tr>
                        <td><code>rover</code></td>
                        <td>Rover traverse - prioritizes accessibility</td>
                        <td>30% safety, 20% illumination, 50% accessibility</td>
                    </tr>
                    <tr>
                        <td><code>custom</code></td>
                        <td>Balanced multi-criteria profile</td>
                        <td>40% safety, 30% illumination, 30% proximity</td>
                    </tr>
                </tbody>
            </table>

            <h3>Example Request</h3>
            <div class="code-block">curl -H "X-API-Key: ldp_live_YOUR_KEY" \
  "https://lunarlandingsiteapi.up.railway.app/api/v1/recommendations?lat=-89.5&lon=45.0&mission_type=artemis&top_n=5"</div>

            <h3>Python Example</h3>
            <div class="code-block">import requests

API_KEY = "ldp_live_YOUR_KEY_HERE"
headers = {"X-API-Key": API_KEY}

response = requests.get(
    "https://lunarlandingsiteapi.up.railway.app/api/v1/recommendations",
    headers=headers,
    params={
        "lat": -89.5,
        "lon": 45.0,
        "mission_type": "artemis",
        "top_n": 5
    }
)

data = response.json()
print(f"Mission: {data['mission_profile']['description']}")
print(f"\nTop {len(data['recommendations'])} Recommendations:")

for rec in data['recommendations']:
    print(f"\n{rec['rank']}. Site {rec['site_id']} (Score: {rec['overall_score']:.1f}/10)")
    print(f"   {rec['reasoning']}")
    print(f"   Strengths: {', '.join(rec['strengths'])}")
    if rec['warnings']:
        print(f"   Warnings: {', '.join(rec['warnings'])}")</div>

            <h3>Response Example</h3>
            <div class="code-block">{
  "mission_profile": {
    "type": "artemis",
    "description": "Artemis human landing mission - prioritizes crew safety",
    "priorities": {
      "safety": 0.5,
      "illumination": 0.3,
      "proximity": 0.2
    }
  },
  "recommendations": [
    {
      "rank": 1,
      "site_id": 928913,
      "location": {"lat": -89.947, "lon": 51.466},
      "overall_score": 4.646,
      "reasoning": "Moderate safety concerns with good visibility (75.2%)...",
      "warnings": ["Steep slopes present (mean 16.5°)"],
      "strengths": ["Meets baseline mission requirements"]
    }
  ]
}</div>
        </div>

        <!-- POST /api/v1/compare -->
        <div class="doc-section">
            <h2>POST /api/v1/compare</h2>
            
            <p><strong>Description:</strong> Compare multiple landing sites side-by-side with trade-off analysis</p>
            <p><strong>Authentication:</strong> Required</p>
            <p><strong>Limits:</strong> Minimum 2 sites, maximum 10 sites</p>

            <h3>Request Body</h3>
            <div class="code-block">{
  "site_ids": [928913, 928914, 929072]
}</div>

            <h3>Example Request</h3>
            <div class="code-block">curl -X POST https://lunarlandingsiteapi.up.railway.app/api/v1/compare \
  -H "X-API-Key: ldp_live_YOUR_KEY" \
  -H "Content-Type: application/json" \
  -d '{"site_ids": [928913, 928914, 929072]}'</div>

            <h3>Python Example</h3>
            <div class="code-block">import requests

API_KEY = "ldp_live_YOUR_KEY_HERE"
headers = {"X-API-Key": API_KEY}

response = requests.post(
    "https://lunarlandingsiteapi.up.railway.app/api/v1/compare",
    headers=headers,
    json={"site_ids": [928913, 928914, 929072]}
)

data = response.json()
print(f"Overall Winner: Site {data['winner_by_category']['overall']}")
print(f"Safest: Site {data['winner_by_category']['safety']}")
print(f"Best Illumination: Site {data['winner_by_category']['illumination']}")

print(f"\nRecommendation: {data['recommendation']['reasoning']}")</div>

            <h3>Use Cases</h3>
            <ul>
                <li>Compare 3-5 finalist sites after initial screening</li>
                <li>Understand trade-offs between safety, illumination, and accessibility</li>
                <li>Get clear recommendation with reasoning</li>
                <li>See category winners (best safety, best illumination, etc.)</li>
            </ul>
        </div>

        <!-- Code Examples -->
        <div class="doc-section" id="code-examples">
            <h2>💻 Complete Code Examples</h2>
            
            <h3>Python: Complete Mission Planning Workflow</h3>
            <div class="code-block">import requests
import json

API_KEY = "ldp_live_YOUR_KEY_HERE"
BASE_URL = "https://lunarlandingsiteapi.up.railway.app"
headers = {"X-API-Key": API_KEY}

def complete_mission_planning_workflow():
    """Complete workflow: Search → Recommend → Compare → Select"""
    
    target_lat, target_lon = -89.5, 45.0
    
    # Step 1: Get initial recommendations
    print("Step 1: Getting recommendations near target...")
    recs_response = requests.get(
        f"{BASE_URL}/api/v1/recommendations",
        headers=headers,
        params={
            "lat": target_lat,
            "lon": target_lon,
            "mission_type": "artemis",
            "top_n": 5
        }
    )
    recs = recs_response.json()
    
    print(f"Found {len(recs['recommendations'])} recommendations")
    print(f"Requests remaining: {recs['user']['requests_remaining']}\n")
    
    # Step 2: Print top recommendations
    print("Step 2: Top 5 Sites:")
    for rec in recs['recommendations']:
        print(f"\n{rec['rank']}. Site {rec['site_id']} - Score: {rec['overall_score']:.1f}/10")
        print(f"   {rec['reasoning']}")
    
    # Step 3: Compare top 3 candidates
    print("\n\nStep 3: Comparing top 3 finalists...")
    top_3_ids = [rec['site_id'] for rec in recs['recommendations'][:3]]
    
    compare_response = requests.post(
        f"{BASE_URL}/api/v1/compare",
        headers=headers,
        json={"site_ids": top_3_ids}
    )
    comparison = compare_response.json()
    
    print(f"\nWinner: Site {comparison['winner_by_category']['overall']}")
    print(f"Recommendation: {comparison['recommendation']['reasoning']}")
    
    # Save results
    with open('mission_planning_results.json', 'w') as f:
        json.dump({"recommendations": recs, "comparison": comparison}, f, indent=2)
    
    print(f"\n✅ Complete! Results saved.")

if __name__ == "__main__":
    complete_mission_planning_workflow()</div>

            <h3>JavaScript: React Site Search Component</h3>
            <div class="code-block">import React, { useState } from 'react';

const API_KEY = "ldp_live_YOUR_KEY_HERE";
const BASE_URL = "https://lunarlandingsiteapi.up.railway.app";

function LunarSiteExplorer() {
  const [sites, setSites] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  const searchSites = async (lat, lon, missionType = 'artemis') =&gt; {
    setLoading(true);
    setError(null);
    
    try {
      const params = new URLSearchParams({
        lat, lon, mission_type: missionType, top_n: 5
      });
      
      const response = await fetch(
        `${BASE_URL}/api/v1/recommendations?${params}`,
        { headers: { 'X-API-Key': API_KEY } }
      );
      
      if (!response.ok) throw new Error(`API Error: ${response.status}`);
      
      const data = await response.json();
      setSites(data.recommendations);
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  return (
    &lt;div className="lunar-explorer"&gt;
      &lt;h2&gt;Lunar Landing Site Explorer&lt;/h2&gt;
      &lt;button onClick={() =&gt; searchSites(-89.5, 0, 'artemis')}&gt;
        Search Near South Pole
      &lt;/button&gt;
      
      {loading &amp;&amp; &lt;p&gt;Searching...&lt;/p&gt;}
      {error &amp;&amp; &lt;p style={{color: 'red'}}&gt;Error: {error}&lt;/p&gt;}
      
      {sites.map(site =&gt; (
        &lt;div key={site.site_id}&gt;
          &lt;h3&gt;Rank {site.rank}: Site {site.site_id}&lt;/h3&gt;
          &lt;p&gt;Score: {site.overall_score.toFixed(1)}/10&lt;/p&gt;
          &lt;p&gt;{site.reasoning}&lt;/p&gt;
        &lt;/div&gt;
      ))}
    &lt;/div&gt;
  );
}

export default LunarSiteExplorer;</div>
        </div>

        <!-- Best Practices -->
        <div class="doc-section" id="best-practices">
            <h2>🎯 Best Practices</h2>
            
            <h3>1. Search Strategy Workflow</h3>
            
            <div class="info-box">
                <strong>Step 1: Start Broad</strong><br>
                • Large radius (100km)<br>
                • Relaxed filters<br>
                • Goal: Overview of available sites<br><br>
                
                <strong>Step 2: Refine</strong><br>
                • Decrease radius (50km)<br>
                • Tighten filters (max_hazard, min_visibility)<br>
                • Goal: Focus on most promising areas<br><br>
                
                <strong>Step 3: Get Recommendations</strong><br>
                • Use /recommendations endpoint<br>
                • Specify mission_type<br>
                • Goal: Mission-specific intelligent ranking<br><br>
                
                <strong>Step 4: Compare Finalists</strong><br>
                • Use /compare on top 3-5 candidates<br>
                • Goal: Understand trade-offs<br><br>
                
                <strong>Step 5: Verify</strong><br>
                • Get full details with /batch<br>
                • Goal: Final validation
            </div>

            <h3>2. Filter Guidelines</h3>
            
            <h4>Conservative (High-stakes crewed missions)</h4>
            <div class="code-block">params = {
    "max_hazard": 1.5,
    "min_visibility": 70.0,
    "max_slope": 10.0
}
# Use case: Artemis landing sites</div>

            <h4>Moderate (Standard robotic missions)</h4>
            <div class="code-block">params = {
    "max_hazard": 2.0,
    "min_visibility": 50.0,
    "max_slope": 15.0
}
# Use case: Commercial landers, science missions</div>

            <h4>Exploratory (Scouting/contingency sites)</h4>
            <div class="code-block">params = {
    "max_hazard": 2.5,
    "min_visibility": 30.0,
    "max_slope": 20.0
}
# Use case: Rover traverses, backup sites</div>

            <h3>3. Performance Optimization</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Operation</th>
                        <th>Typical Latency</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>/search</code> (10 results)</td>
                        <td>40-60ms</td>
                        <td>Most common query</td>
                    </tr>
                    <tr>
                        <td><code>/batch</code> (10 sites)</td>
                        <td>15-25ms</td>
                        <td>Optimized bulk retrieval</td>
                    </tr>
                    <tr>
                        <td><code>/recommendations</code></td>
                        <td>80-120ms</td>
                        <td>Complex multi-site scoring</td>
                    </tr>
                    <tr>
                        <td><code>/compare</code></td>
                        <td>30-50ms</td>
                        <td>Side-by-side analysis</td>
                    </tr>
                </tbody>
            </table>

            <div class="success-box">
                <strong>For Fast Queries (&lt;50ms):</strong>
                <ul>
                    <li>Apply stricter filters to reduce result processing</li>
                    <li>Use batch endpoint for multiple site lookups</li>
                    <li>Cache results when querying repeatedly</li>
                </ul>
            </div>
        </div>

        <!-- Data Sources -->
        <div class="doc-section" id="data-sources">
            <h2>📡 Data Sources & Methodology</h2>
            
            <h3>Terrain Data</h3>
            <ul>
                <li><strong>Source:</strong> NASA LOLA (Lunar Orbiter Laser Altimeter)</li>
                <li><strong>Resolution:</strong> 5 meters per pixel</li>
                <li><strong>Coverage:</strong> -90° to -83.5° latitude (lunar south pole)</li>
                <li><strong>Derived Metrics:</strong> Slope, roughness, relief, hazard index</li>
            </ul>

            <h3>Illumination Data</h3>
            <ul>
                <li><strong>Source:</strong> NASA LROC (Lunar Reconnaissance Orbiter Camera)</li>
                <li><strong>Resolution:</strong> 60-240m (latitude-dependent)</li>
                <li><strong>Coverage:</strong> Full lunar south pole</li>
                <li><strong>Metrics:</strong> Visibility percentage over lunar year</li>
            </ul>

            <h3>Processing Pipeline</h3>
            <ol>
                <li>Download NASA PDS data archives (polar projection)</li>
                <li>Generate 1.18M candidate landing sites from source rasters</li>
                <li>Extract terrain and illumination metrics at each site</li>
                <li>Store in PostGIS database as WGS84 coordinates (EPSG:4326)</li>
                <li>Calculate composite hazard index</li>
                <li>Create spatial indexes (GiST) for fast queries</li>
            </ol>

            <h3>Feature Analysis Scales</h3>
            <p>All terrain and illumination features are computed at three analysis radii:</p>
            <ul>
                <li><strong>25m radius:</strong> Fine-scale local terrain (immediate landing zone)</li>
                <li><strong>50m radius:</strong> Medium-scale neighborhood (landing approach area)</li>
                <li><strong>100m radius:</strong> Coarse-scale regional context (area operations)</li>
            </ul>
            <p>The API returns 100m radius data by default as it provides the most reliable and comprehensive metrics.</p>

            <h3>Hazard Index Scale</h3>
            <p>The hazard index is a composite metric (0-3) combining slope, roughness, and relief:</p>
            <ul>
                <li><strong>0.0-1.0:</strong> Excellent - Safe for all mission types</li>
                <li><strong>1.0-2.0:</strong> Good - Acceptable for most missions</li>
                <li><strong>2.0-2.5:</strong> Moderate - Requires careful evaluation</li>
                <li><strong>2.5-3.0:</strong> High - Challenging terrain, not recommended</li>
            </ul>

            <h3>Data Quality</h3>
            <ul>
                <li><strong>Total Sites:</strong> 1,180,127</li>
                <li><strong>Complete Data:</strong> 99.98% (1,179,905 sites)</li>
                <li><strong>Coordinate System:</strong> WGS84 lat/lon (EPSG:4326)</li>
                <li><strong>Distance Method:</strong> Spherical calculations via PostGIS Geography</li>
                <li><strong>Spatial Accuracy:</strong> Meter-based distances accurate at high latitudes</li>
            </ul>
        </div>

        <!-- Support -->
        <div class="doc-section" id="support">
            <h2>💬 Support</h2>
            
            <h3>Documentation & Resources</h3>
            <ul>
                <li><strong>Interactive API Docs:</strong> <a href="https://lunarlandingsiteapi.up.railway.app/docs" target="_blank">Swagger UI</a></li>
                <li><strong>API Status:</strong> <a href="https://lunarlandingsiteapi.up.railway.app/health" target="_blank">Health Check</a></li>
                <li><strong>Beta Signup:</strong> <a href="https://ldp-api-beta.vercel.app" target="_blank">ldp-api-beta.vercel.app</a></li>
            </ul>

            <h3>Contact & Help</h3>
            <ul>
                <li><strong>Email:</strong> <a href="mailto:info@irisdatalabs.com">info@irisdatalabs.com</a></li>
                <li><strong>Bug Reports:</strong> Email with subject "API Bug Report"</li>
                <li><strong>Feature Requests:</strong> We'd love to hear your ideas!</li>
            </ul>

            <h3>Beta Program</h3>
            <div class="success-box">
                ✅ Free access during beta (100 requests/day)<br>
                ✅ Your feedback helps shape the product<br>
                ✅ Direct influence on future features<br>
                ⚠️ Breaking changes possible (with email notification)
            </div>

            <h3>Citation</h3>
            <p>If you use this API in research, please cite:</p>
            <div class="code-block">Iris Data Labs (2025). Lunar Landing Site API: Intelligent site selection 
powered by NASA terrain and illumination data. 
https://lunarlandingsiteapi.up.railway.app</div>
        </div>

        <!-- Changelog -->
        <div class="doc-section">
            <h2>📝 Changelog</h2>
            
            <h3>v1.0.0 (October 30, 2025) - Current</h3>
            
            <div class="success-box">
                <strong>🚀 Initial Public Beta Release</strong>
            </div>

            <h4>Authentication</h4>
            <ul>
                <li>API key authentication via <code>X-API-Key</code> header</li>
                <li>Beta tier: 100 requests/day</li>
                <li>Usage tracking in all authenticated responses</li>
            </ul>

            <h4>Data</h4>
            <ul>
                <li>1,180,127 analyzed landing sites</li>
                <li>60+ features per site</li>
                <li>99.98% data completeness</li>
            </ul>

            <h4>Endpoints</h4>
            <ul>
                <li>6 total endpoints (2 status + 2 data + 2 decision support)</li>
                <li>Mission-specific intelligent recommendations</li>
                <li>Side-by-side site comparison</li>
                <li>Bulk site retrieval</li>
            </ul>

            <h4>Features</h4>
            <ul>
                <li>Sub-100ms query performance</li>
                <li>Plain English reasoning</li>
                <li>Mission-specific scoring (Artemis, robotic, rover, custom)</li>
                <li>Automatic warning and strength detection</li>
            </ul>

            <h4>Known Limitations</h4>
            <ul>
                <li>Coverage limited to lunar south pole (-90° to -83.5° lat)</li>
                <li>Maximum 100 sites per search query</li>
            </ul>

            <h4>Coming Soon</h4>
            <ul>
                <li>Premium tier (Coming Soon)</li>
                <li>Additional export formats (GeoJSON/KML/CSV)</li>
                <li>Expanded coverage areas</li>
            </ul>
        </div>

    </div>

    <footer>
        <p>© 2025 Iris Data Labs. Built with data from NASA LRO.</p>
        <p style="margin-top: 1rem;">Made with 🌙 for the lunar exploration community</p>
        <p style="margin-top: 1rem;">
            <a href="https://ldp-api-beta.vercel.app">Landing Page</a> | 
            <a href="https://lunarlandingsiteapi.up.railway.app/docs">Interactive Docs</a> | 
            <a href="mailto:info@irisdatalabs.com">Contact</a>
        </p>
        <p style="margin-top: 1rem; opacity: 0.7; font-size: 0.9rem;">
            Last Updated: October 30, 2025 | API Version: 1.0.0 | Status: Public Beta
        </p>
    </footer>

    <script>
        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>
</html>